<!DOCTYPE html>
<html>
<head>
    <title>Local Plot Library Test</title>
    <script src="inst/htmlwidgets/lib/plot/plot.min.js"></script>
    <style>
        body { 
            font-family: sans-serif; 
            padding: 20px;
        }
        .plot-container {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Testing Local Plot Library</h1>
    
    <div class="plot-container">
        <h2>Test 1: Basic Scatter Plot</h2>
        <div id="plot1"></div>
    </div>
    
    <div class="plot-container">
        <h2>Test 2: Using cars data</h2>
        <div id="plot2"></div>
    </div>
    
    <script>
        // Check if Plot is loaded
        if (typeof Plot === 'undefined') {
            document.body.innerHTML = '<h1 style="color: red;">Error: Plot library not loaded!</h1>';
        } else {
            console.log("Plot library loaded successfully!");
            console.log("Plot version info:", Plot);
            
            // Test 1: Simple data
            const data1 = [
                {x: 1, y: 2},
                {x: 2, y: 3},
                {x: 3, y: 5},
                {x: 4, y: 4},
                {x: 5, y: 7}
            ];
            
            const plot1 = Plot.plot({
                marks: [
                    Plot.dot(data1, {x: "x", y: "y", fill: "steelblue", r: 5})
                ],
                grid: true,
                width: 500,
                height: 300
            });
            
            document.getElementById("plot1").appendChild(plot1);
            
            // Test 2: Cars-like data
            const carsData = [
                {speed: 4, dist: 2},
                {speed: 7, dist: 4},
                {speed: 8, dist: 16},
                {speed: 9, dist: 10},
                {speed: 10, dist: 18},
                {speed: 11, dist: 17},
                {speed: 12, dist: 14},
                {speed: 13, dist: 26},
                {speed: 14, dist: 26},
                {speed: 15, dist: 20}
            ];
            
            const plot2 = Plot.plot({
                marks: [
                    Plot.dot(carsData, {x: "speed", y: "dist", fill: "orange", r: 4}),
                    Plot.line(carsData, {x: "speed", y: "dist", stroke: "blue"})
                ],
                grid: true,
                width: 500,
                height: 300,
                marginLeft: 50,
                marginBottom: 40
            });
            
            document.getElementById("plot2").appendChild(plot2);
            
            console.log("Both plots created successfully!");
        }
    </script>
</body>
</html>